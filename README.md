# TJK-Scraper

This repository contains several scripts to scrape and format data from TJK.org,
and then use the formatted data to train an SVR model.

## Requirements

- Python 3.6+

## Installation & Usage

You can now use the script `run.sh` to generate everything with a single
command! Just type: `./run.sh`

Alternatively, follow the steps below:

- Create a new virtualenv: `~$ virtualenv env`
- Activate it: `~$ . env/bin/activate`
- Install the packages: `~$ pip install -r requirements.txt`
- Run the scripts in order.

## Scripts

The following scripts are available in TJK-Scraper.

### horses/scrape.py

Scrapes TJK.org's website for data on horses.

Usage: `horses/scrape.py [target folder]`

### horses/format.py

Formats the previously scraped data into a CSV file.

Usage: `horses/format.py [folder you saved the data to] [target.csv]`

### results/scrape.py

Scrapes race result data from TJK.org, per day and per city.

Usage: `results/scrape.py [folder to save to] [number of days]`

### results/format.csv

Formats the scraped race result data into CSV.

Usage: `results/format.py [folder you saved the data to] [target.csv]`

### generate_db.py

Using the horses dataset CSV, generates an SQLite database.

Usage: `./generate_db.py [horses.csv file] [output file]`

### dataset.py

Using the generated horses database and results CSV, generates a dataset CSV
file that can be used to train the SVR model.

Usage: `./dataset.py [horse database] [results csv] [output csv]`

### train.py

Using the dataset file generated by [dataset.py](dataset.py), trains an
SVR model.

Usage: `./train.py [dataset csv] [output model]`

### predict.py (optional)

This is used to calculate the accuracy of the trained model against real data.

Usage: `./predict.py [trained model] [some other results csv]`

## Copyright

&copy; 2020 Efe Mert Demir. This project is licensed under the BSD 3-Clause License.
